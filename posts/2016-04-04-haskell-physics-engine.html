<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Kynan Rilee - 2D Physics in Haskell</title>
    <link rel="stylesheet" type="text/css" href="../css/default.css" />
  </head>
  <body>
    <div id="wrapper">
      <header id="header">
        <h1>Kynan Rilee</h1>
        <a href="../">Home</a>
        <a href="https://github.com/ublubu">GitHub</a>
        <a href="https://medium.com/@kynan.rilee">Medium blog</a>
        <a href="https://ublubu.tumblr.com">Tumblr blog</a>
        <a href="../contact.html">Contact</a>
        <a href="../resume.pdf">Résumé</a>
      </header>
      <div id="content">
        <h3>2D Physics in Haskell</h3>


<div class="info">
    April  4, 2016
</div>


<p><a href="https://github.com/ublubu/shapes">shapes</a> is a constraint-based physics engine that currently features convex polygons, non-penetration with baumgarte stabilization, friction, solution caching, static and non-rotating objects, and AABB broadphase elimination. It’s based on GDC slide decks I found online.</p>
<p>I’ve had great success optimizing the engine. The current demo comfortably handles 225 objects (1000-2000 constraints) at 100fps. I accomplished this primarily by:</p>
<ul>
<li>optimizing special-case matrix multiplication</li>
<li>using Template Haskell to generate vector arithmetic code with unboxed numbers</li>
<li>changing my solver algorithm to allow caching in unboxed vectors</li>
<li>pervasive inlining</li>
<li>caching some shape queries for contact generation</li>
</ul>
<p>There are still more optimizations I can implement. For example, there are some ideas from <a href="http://bulletphysics.org">Bullet</a> that I’d like to try. And I haven’t even started parallelizing things yet.</p>
<iframe width="420" height="315" src="https://www.youtube.com/embed/DYzf4zBK90o?list=PLmozfF6FosKjmPMnlPoVbWosiExbD0SUF" frameborder="0" allowfullscreen>
</iframe>
<p>This project has been a fun experience in incrementally growing a codebase from a simple core. In addition to pursuing better performance, I also plan to add support for new shapes, new constraints, and new developer interfaces (game physics EDSL?).</p>
<p>Source code: <a href="https://github.com/ublubu/shapes">shapes</a></p>

      </div>
      <div id="footer">
        Site generated by
        <a href="http://jaspervdj.be/hakyll">Hakyll</a>
      </div>
    </div>
  </body>
</html>
